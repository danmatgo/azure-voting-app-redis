Acquiring state lock. This may take a few moments...
[0m[1mazurerm_resource_group.main: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg][0m
[0m[1mazurerm_log_analytics_workspace.main: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.OperationalInsights/workspaces/votingapp-dev-logs][0m
[0m[1mazurerm_virtual_network.main: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.Network/virtualNetworks/votingapp-dev-vnet][0m
[0m[1mazurerm_container_registry.main: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.ContainerRegistry/registries/votingappdevacr][0m
[0m[1mazurerm_network_security_group.aks: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.Network/networkSecurityGroups/votingapp-dev-aks.nsg][0m
[0m[1mazurerm_subnet.aks: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.Network/virtualNetworks/votingapp-dev-vnet/subnets/votingapp-dev-aks-subnet][0m
[0m[1mazurerm_subnet_network_security_group_association.aks: Refreshing state... [id=/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.Network/virtualNetworks/votingapp-dev-vnet/subnets/votingapp-dev-aks-subnet][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # azurerm_kubernetes_cluster.main[0m will be created
[0m  [32m+[0m[0m resource "azurerm_kubernetes_cluster" "main" {
      [32m+[0m[0m api_server_authorized_ip_ranges     = (known after apply)
      [32m+[0m[0m current_kubernetes_version          = (known after apply)
      [32m+[0m[0m dns_prefix                          = "votingapp-dev-aks"
      [32m+[0m[0m fqdn                                = (known after apply)
      [32m+[0m[0m http_application_routing_zone_name  = (known after apply)
      [32m+[0m[0m id                                  = (known after apply)
      [32m+[0m[0m image_cleaner_enabled               = false
      [32m+[0m[0m image_cleaner_interval_hours        = 48
      [32m+[0m[0m kube_admin_config                   = (sensitive value)
      [32m+[0m[0m kube_admin_config_raw               = (sensitive value)
      [32m+[0m[0m kube_config                         = (sensitive value)
      [32m+[0m[0m kube_config_raw                     = (sensitive value)
      [32m+[0m[0m kubernetes_version                  = "1.32.0"
      [32m+[0m[0m location                            = "eastus"
      [32m+[0m[0m name                                = "votingapp-dev-aks"
      [32m+[0m[0m node_resource_group                 = (known after apply)
      [32m+[0m[0m node_resource_group_id              = (known after apply)
      [32m+[0m[0m oidc_issuer_url                     = (known after apply)
      [32m+[0m[0m portal_fqdn                         = (known after apply)
      [32m+[0m[0m private_cluster_enabled             = false
      [32m+[0m[0m private_cluster_public_fqdn_enabled = false
      [32m+[0m[0m private_dns_zone_id                 = (known after apply)
      [32m+[0m[0m private_fqdn                        = (known after apply)
      [32m+[0m[0m public_network_access_enabled       = true
      [32m+[0m[0m resource_group_name                 = "votingapp-dev-rg"
      [32m+[0m[0m role_based_access_control_enabled   = true
      [32m+[0m[0m run_command_enabled                 = true
      [32m+[0m[0m sku_tier                            = "Free"
      [32m+[0m[0m support_plan                        = "KubernetesOfficial"
      [32m+[0m[0m tags                                = {
          [32m+[0m[0m "CostCenter"  = "Training"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Owner"       = "Daniel Matapi"
          [32m+[0m[0m "Project"     = "VotingApp"
        }
      [32m+[0m[0m workload_identity_enabled           = false

      [32m+[0m[0m api_server_access_profile (known after apply)

      [32m+[0m[0m auto_scaler_profile (known after apply)

      [32m+[0m[0m default_node_pool {
          [32m+[0m[0m enable_auto_scaling  = false
          [32m+[0m[0m kubelet_disk_type    = (known after apply)
          [32m+[0m[0m max_pods             = (known after apply)
          [32m+[0m[0m name                 = "system"
          [32m+[0m[0m node_count           = 1
          [32m+[0m[0m node_labels          = (known after apply)
          [32m+[0m[0m orchestrator_version = (known after apply)
          [32m+[0m[0m os_disk_size_gb      = (known after apply)
          [32m+[0m[0m os_disk_type         = "Managed"
          [32m+[0m[0m os_sku               = (known after apply)
          [32m+[0m[0m scale_down_mode      = "Delete"
          [32m+[0m[0m tags                 = {
              [32m+[0m[0m "CostCenter"  = "Training"
              [32m+[0m[0m "Environment" = "dev"
              [32m+[0m[0m "ManagedBy"   = "Terraform"
              [32m+[0m[0m "Owner"       = "Daniel Matapi"
              [32m+[0m[0m "Project"     = "VotingApp"
            }
          [32m+[0m[0m type                 = "VirtualMachineScaleSets"
          [32m+[0m[0m ultra_ssd_enabled    = false
          [32m+[0m[0m vm_size              = "Standard_B2s"
          [32m+[0m[0m vnet_subnet_id       = "/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.Network/virtualNetworks/votingapp-dev-vnet/subnets/votingapp-dev-aks-subnet"
          [32m+[0m[0m workload_runtime     = (known after apply)
        }

      [32m+[0m[0m identity {
          [32m+[0m[0m principal_id = (known after apply)
          [32m+[0m[0m tenant_id    = (known after apply)
          [32m+[0m[0m type         = "SystemAssigned"
        }

      [32m+[0m[0m kubelet_identity (known after apply)

      [32m+[0m[0m network_profile {
          [32m+[0m[0m dns_service_ip          = "10.0.2.10"
          [32m+[0m[0m docker_bridge_cidr      = (known after apply)
          [32m+[0m[0m ebpf_data_plane         = (known after apply)
          [32m+[0m[0m ip_versions             = (known after apply)
          [32m+[0m[0m load_balancer_sku       = "standard"
          [32m+[0m[0m network_data_plane      = (known after apply)
          [32m+[0m[0m network_mode            = (known after apply)
          [32m+[0m[0m network_plugin          = "kubenet"
          [32m+[0m[0m network_policy          = "calico"
          [32m+[0m[0m outbound_ip_address_ids = (known after apply)
          [32m+[0m[0m outbound_ip_prefix_ids  = (known after apply)
          [32m+[0m[0m outbound_type           = "loadBalancer"
          [32m+[0m[0m pod_cidr                = "10.244.0.0/16"
          [32m+[0m[0m pod_cidrs               = (known after apply)
          [32m+[0m[0m service_cidr            = "10.0.2.0/24"
          [32m+[0m[0m service_cidrs           = (known after apply)

          [32m+[0m[0m load_balancer_profile (known after apply)

          [32m+[0m[0m nat_gateway_profile (known after apply)
        }

      [32m+[0m[0m oms_agent {
          [32m+[0m[0m log_analytics_workspace_id = "/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.OperationalInsights/workspaces/votingapp-dev-logs"
          [32m+[0m[0m oms_agent_identity         = (known after apply)
        }

      [32m+[0m[0m windows_profile (known after apply)
    }

[1m  # azurerm_role_assignment.aks_acr_pull[0m will be created
[0m  [32m+[0m[0m resource "azurerm_role_assignment" "aks_acr_pull" {
      [32m+[0m[0m id                               = (known after apply)
      [32m+[0m[0m name                             = (known after apply)
      [32m+[0m[0m principal_id                     = (known after apply)
      [32m+[0m[0m principal_type                   = (known after apply)
      [32m+[0m[0m role_definition_id               = (known after apply)
      [32m+[0m[0m role_definition_name             = "AcrPull"
      [32m+[0m[0m scope                            = "/subscriptions/e0a05e45-793e-42fe-a8f1-7bfb6aeb5105/resourceGroups/votingapp-dev-rg/providers/Microsoft.ContainerRegistry/registries/votingappdevacr"
      [32m+[0m[0m skip_service_principal_aad_check = (known after apply)
    }

[1mPlan:[0m 2 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m aks_cluster_id              = (known after apply)
[0m[1mazurerm_kubernetes_cluster.main: Creating...[0m[0m
[0m[1mazurerm_kubernetes_cluster.main: Still creating... [00m10s elapsed][0m[0m
[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mcreating Kubernetes Cluster (Subscription: "e0a05e45-793e-42fe-a8f1-7bfb6aeb5105"
[31mâ”‚[0m [0mResource Group Name: "votingapp-dev-rg"
[31mâ”‚[0m [0mKubernetes Cluster Name: "votingapp-dev-aks"): performing CreateOrUpdate: unexpected status 400 (400 Bad Request) with response: {
[31mâ”‚[0m [0m  "code": "BadRequest",
[31mâ”‚[0m [0m  "details": null,
[31mâ”‚[0m [0m  "message": "The VM size of Standard_B2s is not allowed in your subscription in location 'eastus'. The available VM sizes are 'standard_dc16ads_cc_v5,standard_dc16ads_v5,standard_dc16as_cc_v5,standard_dc16as_v5,standard_dc16ds_v3,standard_dc16s_v3,standard_dc24ds_v3,standard_dc24s_v3,standard_dc2ads_v5,standard_dc2as_v5,standard_dc2ds_v3,standard_dc2s_v3,standard_dc32ads_cc_v5,standard_dc32ads_v5,standard_dc32as_cc_v5,standard_dc32as_v5,standard_dc32ds_v3,standard_dc32s_v3,standard_dc48ads_cc_v5,standard_dc48ads_v5,standard_dc48as_cc_v5,standard_dc48as_v5,standard_dc48ds_v3,standard_dc48s_v3,standard_dc4ads_cc_v5,standard_dc4ads_v5,standard_dc4as_cc_v5,standard_dc4as_v5,standard_dc4ds_v3,standard_dc4s_v3,standard_dc64ads_cc_v5,standard_dc64ads_v5,standard_dc64as_cc_v5,standard_dc64as_v5,standard_dc8ads_cc_v5,standard_dc8ads_v5,standard_dc8as_cc_v5,standard_dc8as_v5,standard_dc8ds_v3,standard_dc8s_v3,standard_dc96ads_cc_v5,standard_dc96ads_v5,standard_dc96as_cc_v5,standard_dc96as_v5,standard_ec16ads_cc_v5,standard_ec16ads_v5,standard_ec16as_cc_v5,standard_ec16as_v5,standard_ec20ads_cc_v5,standard_ec20ads_v5,standard_ec20as_cc_v5,standard_ec20as_v5,standard_ec2ads_v5,standard_ec2as_v5,standard_ec32ads_cc_v5,standard_ec32ads_v5,standard_ec32as_cc_v5,standard_ec32as_v5,standard_ec48ads_cc_v5,standard_ec48ads_v5,standard_ec48as_cc_v5,standard_ec48as_v5,standard_ec4ads_cc_v5,standard_ec4ads_v5,standard_ec4as_cc_v5,standard_ec4as_v5,standard_ec64ads_cc_v5,standard_ec64ads_v5,standard_ec64as_cc_v5,standard_ec64as_v5,standard_ec8ads_cc_v5,standard_ec8ads_v5,standard_ec8as_cc_v5,standard_ec8as_v5,standard_ec96ads_cc_v5,standard_ec96ads_v5,standard_ec96as_cc_v5,standard_ec96as_v5,standard_ec96iads_v5,standard_ec96ias_v5,standard_fx12-6mds_v2,standard_fx12-6ms_v2,standard_fx12mds,standard_fx12mds_v2,standard_fx12ms_v2,standard_fx16-4mds_v2,standard_fx16-4ms_v2,standard_fx16-8mds_v2,standard_fx16-8ms_v2,standard_fx16mds_v2,standard_fx16ms_v2,standard_fx24-12mds_v2,standard_fx24-12ms_v2,standard_fx24-6mds_v2,standard_fx24-6ms_v2,standard_fx24mds,standard_fx24mds_v2,standard_fx24ms_v2,standard_fx2mds_v2,standard_fx2ms_v2,standard_fx32-16mds_v2,standard_fx32-16ms_v2,standard_fx32-8mds_v2,standard_fx32-8ms_v2,standard_fx32mds_v2,standard_fx32ms_v2,standard_fx36mds,standard_fx4-2mds_v2,standard_fx4-2ms_v2,standard_fx48-12mds_v2,standard_fx48-12ms_v2,standard_fx48-24mds_v2,standard_fx48-24ms_v2,standard_fx48mds,standard_fx48mds_v2,standard_fx48ms_v2,standard_fx4mds,standard_fx4mds_v2,standard_fx4ms_v2,standard_fx64-16mds_v2,standard_fx64-16ms_v2,standard_fx64-32mds_v2,standard_fx64-32ms_v2,standard_fx64mds_v2,standard_fx64ms_v2,standard_fx8-2mds_v2,standard_fx8-2ms_v2,standard_fx8-4mds_v2,standard_fx8-4ms_v2,standard_fx8mds_v2,standard_fx8ms_v2,standard_fx96-24mds_v2,standard_fx96-24ms_v2,standard_fx96-48mds_v2,standard_fx96-48ms_v2,standard_fx96mds_v2,standard_fx96ms_v2,standard_hb120-16rs_v2,standard_hb120-16rs_v3,standard_hb120-32rs_v2,standard_hb120-32rs_v3,standard_hb120-64rs_v2,standard_hb120-64rs_v3,standard_hb120-96rs_v2,standard_hb120-96rs_v3,standard_hb120rs_v2,standard_hb120rs_v3,standard_hb176-144rs_v4,standard_hb176-24rs_v4,standard_hb176-48rs_v4,standard_hb176-96rs_v4,standard_hb176rs_v4,standard_hc44-16rs,standard_hc44-32rs,standard_hc44rs,standard_hx176-144rs,standard_hx176-24rs,standard_hx176-48rs,standard_hx176-96rs,standard_hx176rs,standard_l12aos_v4,standard_l16aos_v4,standard_l24aos_v4,standard_l2aos_v4,standard_l32aos_v4,standard_l4aos_v4,standard_l8aos_v4,standard_m128,standard_m128-32ms,standard_m128-64bds_3_v3,standard_m128-64bds_v3,standard_m128-64bs_v3,standard_m128-64ms,standard_m128bds_3_v3,standard_m128bds_v3,standard_m128bs_v3,standard_m128dms_v2,standard_m128ds_v2,standard_m128m,standard_m128ms,standard_m128ms_v2,standard_m128s,standard_m128s_v2,standard_m12ds_v3,standard_m12s_v3,standard_m16-4ms,standard_m16-8ms,standard_m16bds_v3,standard_m16bs_v3,standard_m16ms,standard_m176-88bds_4_v3,standard_m176-88bds_v3,standard_m176-88bs_v3,standard_m176bds_4_v3,standard_m176bds_v3,standard_m176bs_v3,standard_m176ds_3_v3,standard_m176ds_4_v3,standard_m176s_3_v3,standard_m176s_4_v3,standard_m192idms_v2,standard_m192ids_v2,standard_m192ims_v2,standard_m192is_v2,standard_m208ms_v2,standard_m208s_v2,standard_m24ds_v3,standard_m24s_v3,standard_m32-16ms,standard_m32-8ms,standard_m32bds_v3,standard_m32bs_v3,standard_m32dms_v2,standard_m32ls,standard_m32ms,standard_m32ms_v2,standard_m32ts,standard_m416-208ms_v2,standard_m416-208s_v2,standard_m416bs_v3,standard_m416ds_6_v3,standard_m416ds_8_v3,standard_m416ms_v2,standard_m416s_10_v2,standard_m416s_6_v3,standard_m416s_8_v2,standard_m416s_8_v3,standard_m416s_9_v2,standard_m416s_v2,standard_m48bds_v3,standard_m48bs_v3,standard_m48ds_1_v3,standard_m48s_1_v3,standard_m624ds_12_v3,standard_m624s_12_v3,standard_m64,standard_m64-16ms,standard_m64-32bds_1_v3,standard_m64-32ms,standard_m64bds_1_v3,standard_m64bds_v3,standard_m64bs_v3,standard_m64dms_v2,standard_m64ds_v2,standard_m64ls,standard_m64m,standard_m64ms,standard_m64ms_v2,standard_m64s,standard_m64s_v2,standard_m8-2ms,standard_m8-4ms,standard_m832ds_12_v3,standard_m832ids_16_v3,standard_m832is_16_v3,standard_m832s_12_v3,standard_m8ms,standard_m96-48bds_2_v3,standard_m96bds_2_v3,standard_m96bds_v3,standard_m96bs_v3,standard_m96ds_1_v3,standard_m96ds_2_v3,standard_m96s_1_v3,standard_m96s_2_v3,standard_nc12s_v3,standard_nc16as_t4_v3,standard_nc24ads_a100_v4,standard_nc24rs_v3,standard_nc24s_v3,standard_nc48ads_a100_v4,standard_nc4as_t4_v3,standard_nc64as_t4_v3,standard_nc6s_v3,standard_nc8as_t4_v3,standard_nc96ads_a100_v4,standard_nv12ads_v710_v5,standard_nv24ads_v710_v5,standard_nv4ads_v710_v5,standard_nv8ads_v710_v5' For more details, please visit https://aka.ms/aks/quotas-skus-regions",
[31mâ”‚[0m [0m  "subcode": ""
[31mâ”‚[0m [0m }[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0m  with azurerm_kubernetes_cluster.main,
[31mâ”‚[0m [0m  on main.tf line 85, in resource "azurerm_kubernetes_cluster" "main":
[31mâ”‚[0m [0m  85: resource "azurerm_kubernetes_cluster" "main" [4m{[0m[0m
[31mâ”‚[0m [0m
[31mâ•µ[0m[0m
Releasing state lock. This may take a few moments...
